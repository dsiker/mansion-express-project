<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>

<div id="mansion_show_img">
	<h1><strong><%= @mansion.name %></strong></h1>
	<h3><%= @mansion.city %>, <%= @mansion.country %>, <%= @mansion.region %></br></h3>

	 	<% if current_user && in_mansion?(current_user, @mansion) %>
	 <div id="joinbutton"><%= link_to 'Leave', destroy_booking_path, class: 'btn-lg btn-danger'   %></div>
	 <%elsif room_available?(@mansion)%>
	  	<div id="joinbutton"><%= link_to 'Apply', new_booking_path, class: 'btn-lg btn-success' %></div> 
	 <%end%>

	<img src="<%= @mansion.photo_url %>"  />
</div>





<!-- 	<div class="clear"></div> -->




<!--Show Leave button if user in mansion, else show Join button if room availble-->

<!--Pricings -->
	
<!--Mansion Information -->

<div id="mansions_container">

 	<div id="userimgs">

		
		<% @users.each do |user| %>
				<%= link_to image_tag(user.photo.url(:join)), user %>
		<% end %>
	</div>
	
 <div id="mansion_description">

 	<div class="row">
				<div id="pricings">
					<h3> Price </h3></br>
					<%= link_to image_tag("dollar.jpeg", :class=>"smallimage") %></br>

		  	
		  		<strong>Total Price Per Night:</strong> <%=@mansion.price%>
				 </br> <strong> Per Person: </strong><%= prices_per_occupants(@mansion)%>
			 </div> 
		</div>

</br>
		<div class="row">
			<div class="col-offset-1 col-md-2">
				<h3> Size </h3>
				<%= link_to image_tag("bedrooms.png", :class=>"smallimage") %>
				 <br><br><br> <%= @mansion.bedrooms %> bedrooms</br> <%= @mansion.bathrooms %> bathrooms</br>
			</div>

			<div class="col-md-6">
				<h3> Description </h3> <%= @mansion.description %>
			</div>
		</div>
			



	</div>
</div>
	

<!--MansionMates Information-->


</div>
<!--HERE HERE HERE Maps NOT WORKING -->
<div class='mansionShowMap'>
   <script>
      var handler = Gmaps.build('Google');
      handler.buildMap({ provider: {}, internal: {id: 'mansionshow'}}, function(){
        markers = handler.addMarkers(<%=raw @hash.to_json %>);
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
      });
   </script> 		
</div>


